<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Registro de Usuario</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  </head>
  <body class="bg-light">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Sistema de Folios</a>

        <div class="collapse navbar-collapse">
          <ul class="navbar-nav me-auto">
            {% if request.user.perfil == 'ADMIN' or request.user.perfil == 'SUBADMIN' %}
              <li class="nav-item"><a class="nav-link" href="{% url 'registrar_usuario' %}">Registrar Usuario</a></li>
              <li class="nav-item"><a class="nav-link{% if request.path == '/usuarios/' %} active{% endif %}" href="{% url 'usuarios_lista' %}">Usuarios</a></li>
            {% endif %}
          </ul>
        </div>

        <div class="d-flex">
          <span class="navbar-text text-white me-3">{{ request.user.get_perfil_display }}</span>
          <a href="{% url 'logout' %}" class="btn btn-outline-light btn-sm">Cerrar sesión</a>
        </div>
      </div>
    </nav>

    <!-- Formulario en card -->
    <div class="container mt-5">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <div class="card shadow rounded-4">
            <div class="card-body">
              <h4 class="card-title text-center mb-4">Registrar nuevo usuario</h4>

              {% if messages %}
                {% for message in messages %}
                  <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                {% endfor %}
              {% endif %}

              <form method="POST">
                {% csrf_token %}
                <div class="row mb-3">
                  <div class="col-md-4">
                    <label class="form-label">Nombre</label>
                    <input type="text" name="nombre" class="form-control form-control-lg" required />
                  </div>
                  <div class="col-md-4">
                    <label class="form-label">Apellido paterno</label>
                    <input type="text" name="apellido_paterno" class="form-control form-control-lg" required />
                  </div>
                  <div class="col-md-4">
                    <label class="form-label">Apellido materno</label>
                    <input type="text" name="apellido_materno" class="form-control form-control-lg" required />
                  </div>
                </div>

                <div class="row mb-3">
                  <div class="col-md-4">
                    <label class="form-label">RFC</label>
                    <input type="text" name="rfc" class="form-control form-control-lg" maxlength="13" required />
                  </div>
                  <div class="col-md-4">
                    <label class="form-label">Número de empleado</label>
                    <input type="text" name="numero_empleado" class="form-control form-control-lg" required />
                  </div>
                  <div class="col-md-4">
                    <label class="form-label">Correo electrónico</label>
                    <input type="email" name="email" class="form-control form-control-lg" required />
                  </div>
                </div>

                <div class="row mb-4">
                  <div class="col-md-4">
                    <label class="form-label">Contraseña</label>
                    <input type="password" name="password" class="form-control form-control-lg" required />
                  </div>
                  <div class="col-md-4">
                    <label class="form-label">Perfil</label>
                    <select name="perfil" class="form-select form-select-lg" required>
                      <option value="">-- Selecciona --</option>
                      <option value="ADMIN">Administrador</option>
                      <option value="SUBADMIN">Subadministrador</option>
                      <option value="JEFE">Jefe de Departamento</option>
                      <option value="OPERATIVO">Operativo</option>
                    </select>
                  </div>
                </div>

                <div class="d-grid">
                  <button type="submit" class="btn btn-success btn-lg">Registrar</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
